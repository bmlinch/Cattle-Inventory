/*!
* js-data-angular
* @version 3.1.0 - Homepage <https://www.js-data.io/docs/js-data-angular/>
* @author Jason Dobry <jason.dobry@gmail.com>
* @copyright (c) 2014-2015 Jason Dobry <https://github.com/jmdobry/>
* @license MIT <https://github.com/js-data/js-data-angular/blob/master/LICENSE>
*
* @overview Angular wrapper for js-data.
*/

!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("js-data"),require("angular"),function(){try{return require("axios")}catch(a){}}()):"function"==typeof define&&define.amd?define(["js-data","angular"],function(c,d){return b(c,d,a.axios)}):"object"==typeof exports?exports.jsDataAngularModuleName=b(require("js-data"),require("angular"),function(){try{return require("axios")}catch(a){}}()):a.jsDataAngularModuleName=b(a.JSData,a.angular,a.axios)}(this,function(a,b,c){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){var b=void 0;try{b=c(5)(a.project)}catch(d){}b||(b=window[a["class"]]),b&&(a.loaded=!0,h.module("js-data").provider(a["class"],function(){var a=this;a.defaults={},a.$get=[function(){return new b(a.defaults)}]}))}var f=c(1),g=c(2),h=c(4),i=f.DSUtils,j=f.DSErrors,k=i.isString,l=i.isNumber,m=i.isObject,n=i.set,o=i.resolveId,p=[{project:"js-data-localstorage",name:"localstorage","class":"DSLocalStorageAdapter"},{project:"js-data-localforage",name:"localforage","class":"DSLocalForageAdapter"},{project:"js-data-firebase",name:"firebase","class":"DSFirebaseAdapter"},{project:"js-data-sql",name:"sql","class":"DSSqlAdapter"}],q=["compute","digest","eject","inject"],r=function u(){d(this,u);var a={};this.defaults=a,this.$get=["$http","DS",function(b,c){a.http=a.http||b;var d=new g(a);return c.registerAdapter("http",d,{"default":!0}),d}]},s=function v(){function a(){function a(a){var b=j.defer();try{a(h.bind(b,b.resolve),h.bind(b,b.reject))}catch(c){b.reject(c)}return b.promise}for(var c=arguments.length,d=Array(c),e=0;c>e;e++)d[e]=arguments[e];var g=d[d.length-2],j=d[d.length-1],k=new f.DS(b.defaults),l={};if(a.all=j.all,a.when=j.when,a.reject=j.reject,i.Promise=a,d.length)for(var m=0;m<d.length;m++)for(var n=0;n<p.length;n++)if(p[n].loaded&&!p[n].registered){p[n].registered=!0,k.registerAdapter(p[n].name,d[m]);break}for(var o=function(){var a=q[r];l[a]=k[a],k[a]=function(){for(var b=arguments.length,c=Array(b),d=0;b>d;d++)c[d]=arguments[d];return g.$$phase?l[a].apply(k,c):g.$apply(function(){return l[a].apply(k,c)})}},r=0;r<q.length;r++)o();return("function"!=typeof Object.observe||"function"!=typeof Array.observe)&&g.$watch(function(){return k.observe.Platform.performMicrotaskCheckpoint()}),k}d(this,v);for(var b=this,c=[],e=0;e<p.length;e++)p[e].loaded&&c.push(p[e]["class"]);b.defaults={},f.DS.prototype.bindAll=function(a,b,c,d,e){var f=this;if(b=b||{},!f.definitions[a])throw new j.NER(a);if(!m(b))throw new j.IA('"params" must be an object!');if(!m(c))throw new j.IA('"scope" must be an object!');if(!k(d))throw new j.IA('"expr" must be a string!');try{return c.$watch(function(){return f.lastModified(a)},function(){var g=f.filter(a,b);n(c,d,g),e&&e(null,g)})}catch(g){if(!e)throw g;e(g)}},f.DS.prototype.bindOne=function(a,b,c,d,e){var f=this;if(b=o(f.definitions[a],b),!f.definitions[a])throw new j.NER(a);if(!k(b)&&!l(b))throw new j.IA('"id" must be a string or a number!');if(!m(c))throw new j.IA('"scope" must be an object!');if(!k(d))throw new j.IA('"expr" must be a string!');try{return c.$watch(function(){return f.lastModified(a,b)},function(){var g=f.get(a,b);g&&f.compute(a,b),n(c,d,g),e&&e(null,g)})}catch(g){if(!e)throw g;e(g)}},c.push("$rootScope"),c.push("$q"),c.push(a),b.$get=c};h.module("js-data",["ng"]).value("DSUtils",i).value("DSErrors",j).value("DSVersion",f.version).provider("DS",s).provider("DSHttpAdapter",r).run(["DS","DSHttpAdapter",function(a,b){a.registerAdapter("http",b,{"default":!0})}]);for(var t=0;t<p.length;t++)e(p[t]);a.exports="js-data",a.exports.name="js-data"},function(b,c){b.exports=a},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(1),g=null;try{g=c(3)}catch(h){}var i=f.DSUtils,j=i.deepMixIn,k=i.removeCircular,l=i.copy,m=i.makePath,n=i.isString,o=i.isNumber,p=function(){function a(){d(this,a)}return e(a,[{key:"queryTransform",value:function(a,b){return b}},{key:"deserialize",value:function(a,b){return b&&"data"in b?b.data:b}},{key:"serialize",value:function(a,b){return b}},{key:"log",value:function(){}},{key:"error",value:function(){}}]),a}(),q=p.prototype;q.basePath="",q.forceTrailingSlash="",q.httpConfig={},q.verbsUseBasePath=!1;var r=function(){function a(b){d(this,a),b=b||{},this.defaults=new p,console&&(this.defaults.log=function(a,b){return console["function"==typeof console.info?"info":"log"](a,b)}),console&&(this.defaults.error=function(a,b){return console["function"==typeof console.error?"error":"log"](a,b)}),j(this.defaults,b),this.http=b.http||g}return e(a,[{key:"getEndpoint",value:function(a,b,c){var d=this;c=c||{},c.params=c.params||{};var e=void 0,f=a.parentKey,g=c.hasOwnProperty("endpoint")?c.endpoint:a.endpoint,h=a.parentField,j=a.getResource(a.parent),k=c.params[f];if(k===!1||!f||!j)return k===!1&&delete c.params[f],g;if(delete c.params[f],i._sn(b)?e=a.get(b):i._o(b)&&(e=b),e&&(k=k||e[f]||(e[h]?e[h][j.idAttribute]:null)),!k)return g;var l=function(){delete c.endpoint;var a={};return i.forOwn(c,function(b,c){a[c]=b}),{v:i.makePath(d.getEndpoint(j,k,i._(j,a)),k,g)}}();return"object"==typeof l?l.v:void 0}},{key:"getPath",value:function(a,b,c,d){var e=this;if(d=d||{},n(d.urlPath))return m.apply(i,[d.basePath||e.defaults.basePath||b.basePath,d.urlPath]);var f=[d.basePath||e.defaults.basePath||b.basePath,this.getEndpoint(b,n(c)||o(c)||"create"===a?c:null,d)];return("find"===a||"update"===a||"destroy"===a)&&f.push(c),m.apply(i,f)}},{key:"HTTP",value:function(a){function b(b,e){if(b=b||{},b instanceof Error)return c.defaults.error("FAILED: "+(b.message||"Unknown Error"),b),i.Promise.reject(b);if("object"==typeof b){var f=d.toUTCString()+" - "+a.method+" "+a.url+" - "+b.status+" "+((new Date).getTime()-d.getTime())+"ms";return b.status>=200&&b.status<300&&!e?(c.defaults.log&&c.defaults.log(f,b),b):(c.defaults.error&&c.defaults.error("FAILED: "+f,b),i.Promise.reject(b))}return c.defaults.error("FAILED",b),i.Promise.reject(b)}var c=this,d=new Date;a=l(a),a=j(a,c.defaults.httpConfig),"verbsUseBasePath"in a||(a.verbsUseBasePath=c.defaults.verbsUseBasePath),!a.urlOverride&&a.verbsUseBasePath&&(a.url=m(a.basePath||c.defaults.basePath,a.url)),c.defaults.forceTrailingSlash&&"/"!==a.url[a.url.length-1]&&!a.urlOverride&&(a.url+="/"),"object"==typeof a.data&&(a.data=k(a.data)),a.method=a.method.toUpperCase();var e=a.suffix||c.defaults.suffix;if(e&&a.url.substr(a.url.length-e.length)!==e&&!a.urlOverride&&(a.url+=e),!this.http)throw new Error("You have not configured this adapter with an http library!");return this.http(a).then(b,function(a){return b(a,!0)})}},{key:"GET",value:function(a,b){return b=b||{},b.method=b.method||"get",b.urlOverride=!!b.url,b.url=b.url||a,this.HTTP(b)}},{key:"POST",value:function(a,b,c){return c=c||{},c.method=c.method||"post",c.urlOverride=!!c.url,c.url=c.url||a,c.data=c.data||b,this.HTTP(c)}},{key:"PUT",value:function(a,b,c){return c=c||{},c.method=c.method||"put",c.urlOverride=!!c.url,c.url=c.url||a,c.data=c.data||b,this.HTTP(c)}},{key:"DEL",value:function(a,b){return b=b||{},b.method=b.method||"delete",b.urlOverride=!!b.url,b.url=b.url||a,this.HTTP(b)}},{key:"find",value:function(a,b,c){var d=this;return c=c?l(c):{},c.suffix=c.suffix||a.suffix,c.params=c.params||{},c.params=d.defaults.queryTransform(a,c.params),d.GET(d.getPath("find",a,b,c),c).then(function(b){var e=(c.deserialize?c.deserialize:d.defaults.deserialize)(a,b);return e?e:i.Promise.reject(new Error("Not Found!"))})}},{key:"findAll",value:function(a,b,c){var d=this;return c=c?l(c):{},c.suffix=c.suffix||a.suffix,c.params=c.params||{},b&&(b=d.defaults.queryTransform(a,b),j(c.params,b)),d.GET(d.getPath("findAll",a,b,c),c).then(function(b){return(c.deserialize?c.deserialize:d.defaults.deserialize)(a,b)})}},{key:"create",value:function(a,b,c){var d=this;return c=c?l(c):{},c.suffix=c.suffix||a.suffix,c.params=c.params||{},c.params=d.defaults.queryTransform(a,c.params),d.POST(d.getPath("create",a,b,c),c.serialize?c.serialize(a,b):d.defaults.serialize(a,b),c).then(function(b){return(c.deserialize?c.deserialize:d.defaults.deserialize)(a,b)})}},{key:"update",value:function(a,b,c,d){var e=this;return d=d?l(d):{},d.suffix=d.suffix||a.suffix,d.params=d.params||{},d.params=e.defaults.queryTransform(a,d.params),e.PUT(e.getPath("update",a,b,d),d.serialize?d.serialize(a,c):e.defaults.serialize(a,c),d).then(function(b){return(d.deserialize?d.deserialize:e.defaults.deserialize)(a,b)})}},{key:"updateAll",value:function(a,b,c,d){var e=this;return d=d?l(d):{},d.suffix=d.suffix||a.suffix,d.params=d.params||{},c&&(c=e.defaults.queryTransform(a,c),j(d.params,c)),this.PUT(e.getPath("updateAll",a,b,d),d.serialize?d.serialize(a,b):e.defaults.serialize(a,b),d).then(function(b){return(d.deserialize?d.deserialize:e.defaults.deserialize)(a,b)})}},{key:"destroy",value:function(a,b,c){var d=this;return c=c?l(c):{},c.suffix=c.suffix||a.suffix,c.params=c.params||{},c.params=d.defaults.queryTransform(a,c.params),d.DEL(d.getPath("destroy",a,b,c),c).then(function(b){return(c.deserialize?c.deserialize:d.defaults.deserialize)(a,b)})}},{key:"destroyAll",value:function(a,b,c){var d=this;return c=c?l(c):{},c.suffix=c.suffix||a.suffix,c.params=c.params||{},b&&(b=d.defaults.queryTransform(a,b),j(c.params,b)),this.DEL(d.getPath("destroyAll",a,b,c),c).then(function(b){return(c.deserialize?c.deserialize:d.defaults.deserialize)(a,b)})}}]),a}();a.exports=r},function(a,b){if("undefined"==typeof c){var d=new Error('Cannot find module "axios"');throw d.code="MODULE_NOT_FOUND",d}a.exports=c},function(a,c){a.exports=b},function(a,b,c){function d(a){return c(e(a))}function e(a){return f[a]||function(){throw new Error("Cannot find module '"+a+"'.")}()}var f={};d.keys=function(){return Object.keys(f)},d.resolve=e,a.exports=d,d.id=5}])});
//# sourceMappingURL=js-data-angular.min.map